<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de Niveles</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HEADER -->
  <header>
    <nav>
      <div class="nav-icon">
        <a href="index.html">
          <img src="icono.png" alt="Logo" style="height:70px">
        </a>
      </div>
      <div class="nav-links">
        <a href="lista.html" class="active">Lista de Niveles</a>
        <a href="statsviewer.html">Stats Viewer</a>
      </div>
    </nav>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="niveles-container">
    <div class="panel" id="panel-niveles"></div>
  </div>

  <script>
    const panel = document.getElementById('panel-niveles');

    fetch('niveles.csv')
      .then(r => r.text())
      .then(csv => {
        const lines = csv.trim().split('\n');
        lines.shift(); // quitar cabecera
        lines.forEach(line => {
          const cols = line.split(';');
          const url = cols[1];
          const titulo = cols[2];
          const creador = cols[3];
          const puntos = cols[4];

          const match = url.match(/(?:youtu\.be\/|v=)([\w-]+)/);
          const videoId = match ? match[1] : null;
          const thumbUrl = videoId ? `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg` : '';

          const nivelDiv = document.createElement('div');
          nivelDiv.classList.add('nivel');

          const thumb = document.createElement('a');
          thumb.href = url;
          thumb.target = "_blank";
          thumb.classList.add('thumb');
          thumb.style.backgroundImage = `url('${thumbUrl}')`;
          thumb.style.width = '240px';
          thumb.style.height = '135px';
          thumb.style.backgroundSize = 'cover';
          thumb.style.backgroundPosition = 'center';

          const infoDiv = document.createElement('div');
          infoDiv.classList.add('demon-info');
          infoDiv.innerHTML = `<h2><a href="${url}" target="_blank">${titulo}</a></h2>
                               <p>Creador: ${creador} | Ranchopoints: ${puntos}</p>`;

          nivelDiv.appendChild(thumb);
          nivelDiv.appendChild(infoDiv);
          panel.appendChild(nivelDiv);
        });
      });
  </script>
</body>
</html>

